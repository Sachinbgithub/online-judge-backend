### Test Whole Test Submission API
### This file tests the new submit-whole-test endpoint

@baseUrl = https://localhost:7000/api/CodingTest
@userId = 40115
@codingTestId = 1000017
@attemptNumber = 1

### Submit Whole Coding Test
POST {{baseUrl}}/submit-whole-test
Content-Type: application/json

{
  "userId": {{userId}},
  "codingTestId": {{codingTestId}},
  "attemptNumber": {{attemptNumber}},
  "questionSubmissions": [
    {
      "problemId": 1,
      "languageUsed": "python",
      "finalCodeSnapshot": "#!/bin/python3\r\n\r\nimport math\r\nimport os\r\nimport random\r\nimport re\r\nimport sys\r\n\r\n#\r\n# Complete the 'twoSum' function below.\r\n#\r\n# The function is expected to return an INTEGER_ARRAY.\r\n# The function accepts following parameters:\r\n#  1. INTEGER_ARRAY arr\r\n#  2. INTEGER target\r\n#\r\n\r\ndef twoSum(arr, target):\r\n    # Write your code here\r\n    pass\r\n\r\nif __name__ == '__main__':\r\n    # ðŸ”§ MODIFIED: Use STDIN/STDOUT instead of file operations\r\n    n = int(input().strip())\r\n    arr = list(map(int, input().rstrip().split()))\r\n    target = int(input().strip())\r\n\r\n    result = twoSum(arr, target)\r\n\r\n    # ðŸ”§ MODIFIED: Print to stdout instead of writing to file\r\n    print(' '.join(map(str, result)))",
      "totalTestCases": 2,
      "passedTestCases": 0,
      "failedTestCases": 2,
      "requestedHelp": false,
      "languageSwitchCount": 0,
      "runClickCount": 2,
      "submitClickCount": 0,
      "eraseCount": 0,
      "saveCount": 0,
      "loginLogoutCount": 0,
      "isSessionAbandoned": false,
      "testCaseResults": [
        {
          "testCaseId": 1,
          "testCaseOrder": 1,
          "input": "4\r\n2 7 11 15\r\n9",
          "expectedOutput": "0 1",
          "actualOutput": "",
          "isPassed": false,
          "executionTimeMs": 0,
          "memoryUsedKB": 0,
          "errorMessage": "No available containers for Python execution",
          "errorType": "runtime"
        },
        {
          "testCaseId": 2,
          "testCaseOrder": 2,
          "input": "3\r\n3 2 4\r\n6",
          "expectedOutput": "1 2",
          "actualOutput": "",
          "isPassed": false,
          "executionTimeMs": 0,
          "memoryUsedKB": 0,
          "errorMessage": "No available containers for Python execution",
          "errorType": "runtime"
        }
      ]
    }
  ],
  "totalTimeSpentMinutes": 0,
  "isLateSubmission": false,
  "classId": 0
}

### Get Coding Test Submissions (to verify data was stored)
POST {{baseUrl}}/submissions
Content-Type: application/json

{
  "userId": {{userId}},
  "codingTestId": {{codingTestId}},
  "pageNumber": 1,
  "pageSize": 10
}

### Get Coding Test Statistics
GET {{baseUrl}}/{{codingTestId}}/statistics
